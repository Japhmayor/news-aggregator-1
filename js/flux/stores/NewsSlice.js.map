{"version":3,"sources":["../../../src/flux/stores/NewsSlice.js"],"names":["Logic","loadNewsCompleted","slice","news","source","articles","sortBy","concat","id","data","removeAllNews","paneId","removeNews","item","filter","article","articleId","removeUnderNews","_underIndex","findIndex","NewsSlice","onLoadNews","option","ComponentActions","showNewsPane","itemConf","triggerLoadingProgress","LP","LOADING","onLoadNewsCompleted","r","trigger","TYPES","LOAD_NEWS_COMPLETED","LOADING_COMPLETE","onLoadNewsFailed","showModalDialog","LOADING_FAILED","onRemoveNews","onRemoveAllNews","onRemoveUnderNews"],"mappings":"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","sourcesContent":["\r\nimport { TYPES } from '../actions/NewsActions'\r\nimport ComponentActions from '../actions/ComponentActions'\r\nimport {TYPES as LP} from '../actions/LoadingProgressActions'\r\n\r\nconst Logic = {\r\n  loadNewsCompleted(slice, news){\r\n    const { source, articles=[], sortBy } = news;\r\n    slice[source] = slice[source]\r\n      ? articles.concat(slice[source])\r\n      : articles\r\n    return {\r\n      id: source,\r\n      data: slice[source],\r\n      sortBy: sortBy\r\n    };\r\n  },\r\n\r\n  removeAllNews(slice, paneId){\r\n    slice[paneId] = []\r\n    return {\r\n      id: paneId,\r\n      data: slice[paneId],\r\n      sortBy: ''\r\n    };\r\n  },\r\n\r\n  removeNews(slice, item){\r\n    const { id, source } = item;\r\n    slice[source] = slice[source]\r\n      .filter(article => article.articleId !== id)\r\n  },\r\n\r\n  removeUnderNews(slice, item){\r\n    const { articleId, source } = item;\r\n    const _underIndex = slice[source]\r\n      .findIndex(article => article.articleId === articleId);\r\n\r\n    slice[source] = slice[source].slice(_underIndex+1)\r\n    return {\r\n      id: source,\r\n      data: slice[source]\r\n    };\r\n  }\r\n\r\n}\r\n\r\nconst NewsSlice = {\r\n  news: {},\r\n\r\n  onLoadNews(option={}){\r\n    ComponentActions.showNewsPane(option.itemConf)\r\n    this.triggerLoadingProgress(LP.LOADING)\r\n  },\r\n  onLoadNewsCompleted({ news, itemConf }){\r\n    if (news) {\r\n      const r = Logic.loadNewsCompleted(this.news, news);\r\n      this.trigger(TYPES.LOAD_NEWS_COMPLETED, r)\r\n    }\r\n    this.triggerLoadingProgress(LP.LOADING_COMPLETE)\r\n  },\r\n  onLoadNewsFailed(option){\r\n    ComponentActions.showModalDialog('ALERT_DIALOG', option)\r\n    //ComponentActions.showModalDialog('APIKEY_DIALOG', option)\r\n    this.triggerLoadingProgress(LP.LOADING_FAILED)\r\n  },\r\n\r\n\r\n  onRemoveNews(item){\r\n    Logic.removeNews(this.news, item)\r\n  },\r\n  onRemoveAllNews(paneId){\r\n    const r = Logic.removeAllNews(this.news, paneId)\r\n    this.trigger(TYPES.LOAD_NEWS_COMPLETED, r)\r\n  },\r\n  onRemoveUnderNews(item){\r\n    const r = Logic.removeUnderNews(this.news, item)\r\n    this.trigger(TYPES.LOAD_NEWS_COMPLETED, r)\r\n  }\r\n\r\n}\r\n\r\nexport default NewsSlice\r\n"],"file":"NewsSlice.js"}