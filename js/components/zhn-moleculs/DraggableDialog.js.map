{"version":3,"sources":["../../../src/components/zhn-moleculs/DraggableDialog.jsx"],"names":["CL_DIALOG","CL_DIALOG_OPEN","styles","rootDiv","position","top","left","backgroundColor","border","borderRadius","boxShadow","zIndex","childrenDiv","cursor","commandDiv","float","marginTop","marginBottom","marginRight","BLOCK","display","NONE","DraggableDialog","_handleKeyDown","event","focused","document","activeElement","props","onKeyDown","_handleClose","prevFocusedEl","focus","onClose","_renderCommandButton","commandButtons","S","styleButton","onShowChart","RAISED_ROOT","CL_RAISED_DIV","makeDragable","prevProps","prevState","isShow","rootStyle","caption","browserCaptionStyle","children","_styleShow","_classShow","c","Object","assign"],"mappings":"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","file":"DraggableDialog.js","sourcesContent":["import React, { Component } from 'react'\r\n//import PropTypes from 'prop-types'\r\n\r\nimport BrowserCaption from '../zhn-atoms/BrowserCaption'\r\nimport RaisedButton from '../zhn-atoms/RaisedButton'\r\n\r\nimport Interact from '../../utils/Interact'\r\n\r\nconst CL_DIALOG = 'dialog';\r\nconst CL_DIALOG_OPEN = 'dialog show-popup';\r\n\r\nconst styles = {\r\n  rootDiv: {\r\n    position: 'absolute',\r\n    top: '30px',\r\n    left: '50px',\r\n    backgroundColor: '#4D4D4D',\r\n    border: 'solid 2px #3f5178',\r\n    borderRadius: '5px',\r\n    boxShadow: 'rgba(0, 0, 0, 0.2) 0px 0px 0px 6px',\r\n    zIndex: 10\r\n  },\r\n  childrenDiv: {\r\n    cursor: 'default'\r\n  },\r\n  commandDiv : {\r\n     cursor: 'default',\r\n     float: 'right',\r\n     marginTop: '16px',\r\n     marginBottom: '10px',\r\n     marginRight: '4px'\r\n  },\r\n  BLOCK: {\r\n    display: 'block'\r\n  },\r\n  NONE: {\r\n    display: 'none'\r\n  }\r\n};\r\n\r\nclass DraggableDialog extends Component {\r\n  /*\r\n  static propTypes = {\r\n    isShow: PropTypes.bool,\r\n    caption: PropTypes.string,\r\n    children: PropTypes.oneOfType([\r\n      PropTypes.arrayOf(PropTypes.node),\r\n      PropTypes.node\r\n    ]),\r\n    commandButtons: PropTypes.arrayOf(PropTypes.element),\r\n    onShowChart: PropTypes.func,\r\n    onClose: PropTypes.func\r\n  }\r\n  */\r\n\r\n  componentDidMount(){\r\n     Interact.makeDragable(this.rootDiv)\r\n     this.prevFocusedEl = document.activeElement\r\n     this.rootDiv.focus()\r\n  }\r\n  componentDidUpdate(prevProps, prevState){\r\n    if (this.props.isShow && !prevProps.isShow) {\r\n      this.rootDiv.focus()\r\n    }\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n    const focused = document.activeElement;\r\n     if (focused == this.rootDiv){\r\n       this.props.onKeyDown(event)\r\n     }\r\n  }\r\n\r\n  _handleClose = (event) => {\r\n    if (this.prevFocusedEl) {\r\n      this.prevFocusedEl.focus()\r\n    }\r\n    this.props.onClose()\r\n  }\r\n\r\n  _renderCommandButton = ({\r\n    commandButtons, styleButton:S, onShowChart, onClose\r\n  }) => {\r\n    return (\r\n      <div style={styles.commandDiv}>\r\n        {commandButtons}\r\n        {typeof onShowChart === 'function' &&\r\n          <RaisedButton\r\n             rootStyle={S.RAISED_ROOT}\r\n             clDiv={S.CL_RAISED_DIV}\r\n             caption=\"Show\"\r\n             onClick={onShowChart}\r\n          />\r\n        }\r\n        <RaisedButton\r\n           rootStyle={S.RAISED_ROOT}\r\n           clDiv={S.CL_RAISED_DIV}\r\n           caption=\"Close\"\r\n           onClick={this._handleClose}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render(){\r\n    const {\r\n           isShow, rootStyle,\r\n           caption, browserCaptionStyle,\r\n           commandButtons, styleButton,\r\n           children,\r\n           onShowChart, onClose\r\n         } = this.props\r\n        , _styleShow = isShow ? styles.BLOCK : styles.NONE\r\n        , _classShow = isShow ? CL_DIALOG_OPEN : CL_DIALOG;\r\n    return (\r\n      <div\r\n           ref={c => this.rootDiv = c}\r\n           className={_classShow}\r\n           style={Object.assign({}, styles.rootDiv, rootStyle, _styleShow)}\r\n           tabIndex=\"0\"\r\n           onKeyDown={this._handleKeyDown}\r\n      >\r\n        <BrowserCaption\r\n           rootStyle={browserCaptionStyle}\r\n           caption={caption}\r\n           onClose={onClose}\r\n        />\r\n        <div style={styles.childrenDiv}>\r\n           {children}\r\n        </div>\r\n        {this._renderCommandButton({ commandButtons, styleButton, onShowChart, onClose })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  focusPrevEl(){\r\n    if (this.prevFocusedEl){\r\n      this.prevFocusedEl.focus()\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default DraggableDialog\r\n"]}