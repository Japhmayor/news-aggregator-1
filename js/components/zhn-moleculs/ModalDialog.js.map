{"version":3,"sources":["../../../src/components/zhn-moleculs/ModalDialog.jsx"],"names":["CL","SHOWING","HIDING","S2","INIT","display","opacity","transform","S","ROOT_DIV","position","top","backgroundColor","border","borderRadius","boxShadow","zIndex","COMMAND_DIV","marginTop","marginBottom","marginRight","cursor","_hasFocusFn","ref","current","focus","_hClickDialog","event","stopPropagation","ModalDialog","isShow","isWithButton","style","caption","styleCaption","children","onKeyDown","onClose","divBtStyle","commandButtons","TS","styleButton","withoutClose","isClosePrimary","_refRootDiv","_refPrevFocused","initialWasClosed","_className","className","_style","_hKeyDown","document","activeElement","RAISED_ROOT","CL_RAISED_DIV"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useCallback } from 'react'\r\n//import PropTypes from 'prop-types'\r\n\r\nimport useClassAnimation from '../zhn-hooks/useClassAnimation'\r\n\r\nimport BrowserCaption from '../zhn-atoms/BrowserCaption'\r\nimport RaisedButton from '../zhn-atoms/RaisedButton'\r\n\r\nconst CL = {\r\n  SHOWING : 'dialog show-popup',\r\n  HIDING : 'hide-popup'\r\n};\r\n\r\nconst S2 = {\r\n  INIT: {\r\n    display: 'none'\r\n  },\r\n  SHOWING: {\r\n    display: 'block'\r\n  },\r\n  HIDING: {\r\n    opacity: 0,\r\n    transform: 'scaleY(0)'\r\n  }\r\n};\r\n\r\nconst S = {\r\n  ROOT_DIV: {\r\n    position: 'absolute',\r\n    top: '20%',\r\n    display: 'block',\r\n    backgroundColor: '#4d4d4d',\r\n    border: 'solid 2px #3f5178',\r\n    borderRadius: 5,\r\n    boxShadow: 'rgba(0, 0, 0, 0.2) 0px 0px 0px 6px',\r\n    zIndex: 10\r\n  },\r\n  COMMAND_DIV : {\r\n     float: 'right',\r\n     marginTop: 16,\r\n     marginBottom: 10,\r\n     marginRight: 4,\r\n     cursor: 'default'\r\n  }\r\n};\r\n\r\nconst _hasFocusFn = ref =>\r\n  typeof ((ref || {}).current || {}).focus === 'function';\r\n\r\n\r\nconst _hClickDialog = (event) => {\r\n  event.stopPropagation()\r\n};\r\n\r\nconst ModalDialog = ({\r\n  isShow, isWithButton,\r\n  style,\r\n  caption, styleCaption,\r\n  children,\r\n  onKeyDown, onClose,\r\n  divBtStyle, commandButtons, styleButton:TS,\r\n  withoutClose, isClosePrimary=false\r\n}) => {\r\n  const _refRootDiv = useRef()\r\n  , _refPrevFocused = useRef()\r\n  , {\r\n    className:_className, style:_style\r\n  } = useClassAnimation({\r\n    isShow, CL, S: S2,\r\n    initialWasClosed: false\r\n  })\r\n  , _hKeyDown = useCallback((event) => {\r\n     if (document.activeElement == _refRootDiv.current){\r\n       onKeyDown(event)\r\n     }\r\n  })\r\n\r\n  useEffect(() => {\r\n    _refPrevFocused.current = document.activeElement\r\n  }, [])\r\n  useEffect(() => {\r\n    if (isShow && _refRootDiv) {\r\n      _refRootDiv.current.focus()\r\n    }\r\n  }, [isShow])\r\n  useEffect(() => {\r\n    if (_style === S2.HIDING && _hasFocusFn(_refPrevFocused) ) {\r\n      _refPrevFocused.current.focus()\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div\r\n        ref={_refRootDiv}\r\n        tabIndex=\"0\"\r\n        className={_className}\r\n        style={{\r\n          ...S.ROOT_DIV,\r\n          ...style,\r\n          ..._style\r\n        }}\r\n        onClick={_hClickDialog}\r\n        onKeyDown={_hKeyDown}\r\n    >\r\n        <BrowserCaption\r\n          rootStyle={styleCaption}\r\n          caption={caption}\r\n          onClose={onClose}\r\n        />\r\n        <div>\r\n          {children}\r\n        </div>\r\n       {isWithButton && <div style={{ ...S.COMMAND_DIV, ...divBtStyle }}>\r\n         {commandButtons}\r\n         {!withoutClose &&\r\n             <RaisedButton\r\n                key=\"_close\"\r\n                rootStyle={TS.RAISED_ROOT}\r\n                clDiv={TS.CL_RAISED_DIV}\r\n                caption=\"Close\"\r\n                isPrimary={isClosePrimary}\r\n                onClick={onClose}\r\n             />\r\n         }\r\n         </div>\r\n       }\r\n   </div>\r\n  );\r\n}\r\n\r\nexport default ModalDialog\r\n"],"file":"ModalDialog.js"}